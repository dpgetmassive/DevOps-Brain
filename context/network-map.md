# Network Map

Network topology and addressing for the Get Massive Dojo homelab.

**Last Updated**: 2026-02-08
**Generated by**: network-discovery skill (automated scan)

## Subnet Layout

### Primary LAN: 10.16.1.0/24 (VLAN 1)

| IP | Hostname | Role | Source |
|----|----------|------|--------|
| 10.16.1.1 | opnsense | Firewall/gateway | Physical |
| 10.16.1.18 | n100uck | Monitoring witness | Physical |
| 10.16.1.22 | pve-scratchy | Primary Proxmox node | Physical |
| 10.16.1.8 | pve-itchy | Secondary Proxmox node | Physical |
| 10.16.1.6 | truenas-scale | Primary TrueNAS storage | Physical |
| 10.16.1.20 | truenas-dr | DR TrueNAS storage | Physical |
| 10.16.1.9 | gm-ai | AI/ML services | Physical |
| 10.16.1.4 | dockc | VM 100 | Proxmox pve-scratchy |
| 10.16.66.9 | haosova-6.6 | VM 105 | Proxmox pve-scratchy |
| 10.16.1.6 | truenas-scale | VM 110 | Proxmox pve-scratchy |
| 10.16.1.20 | truenas-scale-DR | VM 115 | Proxmox pve-itchy |

### IoT VLAN: 10.16.66.0/24 (VLAN 66)

| IP | Hostname | Role | Source |
|----|----------|------|--------|
| 10.16.66.9 | homeassistant | Home Assistant OS | Physical |
| 10.16.66.10 | familyframed-pi | Raspberry Pi | Physical |

### Tailscale: 10.16.10.0/24 (VLAN 10)

| IP | Hostname | Role | Source |
|----|----------|------|--------|
| 10.16.10.2 | cp-tailscale (CT 117) | Tailscale for Cyber People | Proxmox pve-scratchy |

## Virtual IPs (VIPs)

| VIP | Purpose | Protocol | Primary | Secondary |
|-----|---------|----------|---------|-----------|
| 10.16.1.15 | Pi-hole DNS HA | VRRP (keepalived) | piholed (10.16.1.16, priority 100) | n100uck (10.16.1.18, priority 90) |

**VRRP Config**:
- Virtual Router ID: 15
- Advertisement interval: 1 second
- Auth: PASS (piholedns2025)
- Primary interface: eth0 (piholed), enp3s0 (n100uck)

## DNS Configuration

### Internal DNS (Pi-hole)

**Service IP**: 10.16.1.15 (VIP, auto-failover)
- Primary: piholed (10.16.1.16)
- Secondary: n100uck (10.16.1.18)
- Pi-hole version: v6.2.2

**Upstream resolvers**: 1.1.1.1, 1.0.0.1 (Cloudflare)
**Cache size**: 10000

### Local DNS Records (*.gmdojo.tech -> 10.16.1.50)

All resolve to NPM (10.16.1.50) for reverse proxy routing:

| Domain | Points To | Service |
|--------|-----------|---------|
| pve.gmdojo.tech | 10.16.1.50 | pve |
| uptime.gmdojo.tech | 10.16.1.50 | uptime |
| grafana.gmdojo.tech | 10.16.1.50 | grafana |
| nas.gmdojo.tech | 10.16.1.50 | nas |
| pihole.gmdojo.tech | 10.16.1.26 | pihole |
| home.gmdojo.tech | 10.16.1.50 | home |
| status.gmdojo.tech | 10.16.1.50 | status |
| npm.gmdojo.tech | 10.16.1.50 | npm |
| auth.gmdojo.tech | 10.16.1.50 | auth |
| test.gmdojo.tech | 10.16.1.26 | test |
| plex.gmdojo.tech | 10.16.1.50 | plex |
| sonarr.gmdojo.tech | 10.16.1.50 | sonarr |
| radarr.gmdojo.tech | 10.16.1.50 | radarr |
| immich.gmdojo.tech | 10.16.1.50 | immich |
| ha.gmdojo.tech | 10.16.1.50 | ha |
| eric.gmdojo.tech | 10.16.1.50 | eric |
| clawdbot.gmdojo.tech | 10.16.1.50 | clawdbot |
| showmethemoney.gmdojo.tech | 10.16.1.50 | showmethemoney |
| unifi.gmdojo.tech | 10.16.1.50 | unifi |
| gap-app.gmdojo.tech | 10.16.1.50 | gap-app |

**DNS sync**: Custom records sync hourly from piholed to n100uck via `/root/sync-pihole-dns.sh`

### Cloudflare

- **DNS challenge**: Used by Traefik for Let's Encrypt wildcard certs
- **Tunnel**: `uptime-gm-hq` for external access to select services
- **Tunnel CT**: cloudflared (CT 114, 10.16.1.3)

## Tailscale

- **Subnet routing**: Via TrueNAS for homelab access
- **Nodes**: tailscaler (CT 901), cp-tailscale (CT 117)
- **External access**: dp-macbook-secondary (100.86.205.100)

## Reverse Proxy Architecture

### Primary: Nginx Proxy Manager (CT 200, 10.16.1.50)
- Admin: port 81
- HTTP: port 8080
- HTTPS: port 8443
- Routes all `*.gmdojo.tech` domains

### Auth Layer: Traefik + Authelia (CT 123 + CT 122)
- Traefik: HTTP/80, HTTPS/443, Dashboard/8080 (10.16.1.26)
- Authelia: SSO on port 9091 (10.16.1.25, auth.gmdojo.tech)
- Handles authentication middleware for protected services

### Backup: NPM on n100uck (Docker)
- Admin: port 81
- HTTP: port 8080
- HTTPS: port 8443

## Notification Channels

| Channel | Endpoint | Purpose |
|---------|----------|---------|
| ntfy (consolidated) | https://ntfy.sh/homelab-status | All monitoring alerts |
| ntfy (DNS sync) | https://ntfy.sh/gmdojo-monitoring | Pi-hole DNS sync alerts |
| Mailrise SMTP | 10.16.1.18:25 | Email-to-ntfy relay for legacy apps |
